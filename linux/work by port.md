## راهنمایی یافتن پورت های باز و بستتن آنها

# 1. یافتن port

###  **استفاده از ابزارهای اسکن شبکه**
ابزارهایی مانند `nmap` می‌توانند به شما کمک کنند تا علاوه بر شناسایی پورت‌های باز، نوع سرویسی که روی آن پورت اجرا می‌شود را نیز تشخیص دهید.

#### دستور nmap:
```bash
nmap -sV <آدرس IP>
```
- `-sV`: این گزینه باعث می‌شود nmap سعی کند نسخه و نوع سرویس اجرا شده روی هر پورت را شناسایی کند.
- `<آدرس IP>`: آدرس IP دستگاه یا سروری که می‌خواهید اسکن کنید.

مثال خروجی:
```
PORT     STATE SERVICE    VERSION
22/tcp   open  ssh        OpenSSH 8.2p1 Ubuntu 4ubuntu0.5
80/tcp   open  http       Apache httpd 2.4.41
443/tcp  open  ssl/http   Apache httpd 2.4.41
```
در این خروجی مشخص است که پورت 22 برای SSH، پورت 80 برای HTTP و پورت 443 برای HTTPS استفاده می‌شود.

---

###  **بررسی تنظیمات فایروال یا سرور**
اگر دسترسی مدیریتی به دستگاه یا سرور دارید، می‌توانید تنظیمات فایروال یا سرویس‌های اجرا شده روی آن را بررسی کنید. برای این کار می‌توانید از دستورات زیر استفاده کنید:

#### الف) **در لینوکس:**
- بررسی سرویس‌های فعال:
  ```bash
  systemctl list-units --type=service
  ```
- بررسی پورت‌های گوش دهنده (listening ports):
  ```bash
  netstat -tuln
  ```
  یا:
  ```bash
  ss -tuln
  ```
---
# 1.بستن پورت
1. **استفاده از `netstat`:**
   ```bash
   sudo netstat -tulnp | grep <شماره پورت>
   ```
   - `-t`: نمایش اتصالات TCP.
   - `-u`: نمایش اتصالات UDP.
   - `-l`: نمایش پورت‌هایی که در حال گوش دادن (listening) هستند.
   - `-n`: نمایش آدرس‌ها و پورت‌ها به صورت عددی.
   - `-p`: نمایش PID و نام فرآیند مرتبط با هر پورت.

   مثال:
   ```bash
   sudo netstat -tulnp | grep 8080
   ```
   خروجی ممکن است شبیه به این باشد:
   ```
   tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      1234/python
   ```
   در اینجا، پورت 8080 توسط فرآیندی با PID `1234` و نام `python` مشغول شده است.

2. **استفاده از `ss`:**
   دستور `ss` جایگزین مدرن‌تری برای `netstat` است:
   ```bash
   sudo ss -tuln | grep <شماره پورت>
   ```

3. **استفاده از `lsof`:**
   ```bash
   sudo lsof -i :<شماره پورت>
   ```
   مثال:
   ```bash
   sudo lsof -i :8080
   ```
   خروجی ممکن است شبیه به این باشد:
   ```
   COMMAND   PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
   python   1234   root    3u  IPv4  12345      0t0  TCP *:8080 (LISTEN)
   ```
   در اینجا، فرآیند `python` با PID `1234` پورت 8080 را مشغول کرده است.

---

#### ب) **بستن سرویس مرتبط با پورت**
پس از شناسایی PID سرویس، می‌توانید آن را متوقف کنید:

1. **متوقف کردن فرآیند با `kill`:**
   ```bash
   sudo kill <PID>
   ```
   مثال:
   ```bash
   sudo kill 1234
   ```

2. **متوقف کردن فرآیند به صورت قطعی (Force Kill):**
   اگر فرآیند به `kill` پاسخ نداد، از دستور زیر استفاده کنید:
   ```bash
   sudo kill -9 <PID>
   ```

3. **متوقف کردن سرویس از طریق `systemctl`:**
   اگر سرویس توسط `systemd` مدیریت می‌شود، می‌توانید آن را متوقف کنید:
   ```bash
   sudo systemctl stop <نام سرویس>
   ```
   مثال:
   ```bash
   sudo systemctl stop apache2
   ```
